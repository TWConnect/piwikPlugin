<script type="text/javascript" src="plugins/SearchMonitor/javascripts/Chart.js"></script>

<script>
    (function ($, require) {
        $(document).ready(function () {
            var paceTimeCount = new ajaxHelper();

            paceTimeCount.addParams({
                module: 'API',
                method: 'SearchMonitor.getPaceTimeOnSearchResultDistribution',
                format: 'json'
            }, 'get');
            paceTimeCount.setCallback(function (response) {
                var parsedObj = response;
                var labels = parsedObj.map(function (e) {
                    return e['label']
                });
                var count = parsedObj.map(function (e) {
                    return parseFloat(e['Count'])
                });
                var ctx = document.getElementById("pace_time_bar").getContext("2d");
                var myChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                type: 'bar',
                                label: 'Search (times)',
                                data: count,
                                backgroundColor: "red",
                                borderColor: "red"
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            });
            paceTimeCount.send(false);
        });

    })($, require);
</script>

<div class="card">
    <h2 style="margin:18px;">{{ name }}</h2>
    <div style="margin:0 18px;">{{documentation|raw}}</div>
    <div class="card-content">
        <div class="chart-wrapper">
            <canvas id="pace_time_bar"></canvas>
        </div>
    </div>
</div>
